!function(t,e){"use strict";t.wp=t.wp||{},t.wp.hooks=t.wp.hooks||new function(){var i=Array.prototype.slice,d={removeFilter:function(t,e){return"string"==typeof t&&n("filters",t,e),d},applyFilters:function(){var t=i.call(arguments),e=t.shift();return"string"!=typeof e?d:a("filters",e,t)},addFilter:function(t,e,i,n){return"string"==typeof t&&"function"==typeof e&&(i=parseInt(i||10,10),o("filters",t,e,i,n)),d},removeAction:function(t,e){return"string"==typeof t&&n("actions",t,e),d},doAction:function(){var t=i.call(arguments),e=t.shift();return"string"==typeof e&&a("actions",e,t),d},addAction:function(t,e,i,n){return"string"==typeof t&&"function"==typeof e&&(i=parseInt(i||10,10),o("actions",t,e,i,n)),d}},s={actions:{},filters:{}};function n(t,e,i,n){var d,o,a;if(s[t][e])if(i)if(d=s[t][e],n)for(a=d.length;a--;)(o=d[a]).callback===i&&o.context===n&&d.splice(a,1);else for(a=d.length;a--;)d[a].callback===i&&d.splice(a,1);else s[t][e]=[]}function o(t,e,i,n,d){var o={callback:i,priority:n,context:d},a=s[t][e];a=a?(a.push(o),function(t){for(var e,i,n,d=1,o=t.length;d<o;d++){for(e=t[d],i=d;(n=t[i-1])&&n.priority>e.priority;)t[i]=t[i-1],--i;t[i]=e}return t}(a)):[o],s[t][e]=a}function a(t,e,i){var n,d,o=s[t][e];if(!o)return"filters"===t&&i[0];if(d=o.length,"filters"===t)for(n=0;n<d;n++)i[0]=o[n].callback.apply(o[n].context,i);else for(n=0;n<d;n++)o[n].callback.apply(o[n].context,i);return"filters"!==t||i[0]}return d}}(window),function(o,t,a){"use strict";var s={$elem:null,options:{},models:{},defaultOptions:{post:null,nonceName:null,nonce:null,widgetDefaults:{},ajaxurl:t.ajaxurl||null,chunkLength:10},init:function(t,e){this.$elem=o(t),this.options=o.extend({},this.defaultOptions,e),this.$elem.on("click",".pb-widget-add-control",function(t){var i=o(this).closest(".pb-widget");s.widgetPicker(function(t){if("row"==i.data("type"))return"column"!=t.data("type")?void alert("Only columns allowed."):(s.addWidget(t,i),void s.loadWidgetPreview(t));if("column"==i.data("type")){if("column"==t.data("type"))return void alert("No columns allowed.");if("row"!=t.data("type"))return s.addWidget(t,i),void s.loadWidgetPreview(t);var e=s.createWidget("column");return s.addWidget(t,i),s.addWidget(e,t),void s.loadWidgetPreview(t)}alert("Not allowed.")},i)}),this.$elem.on("click",".pb-widget-edit-control",function(t){var e=o(this).closest(".pb-widget");s.widgetSettings(e)}),this.$elem.on("click",".pb-widget-copy-control",function(t){var e=o(this).closest(".pb-widget"),i=s.duplicateWidget(e);s.addWidget(i,e,"insertAfter"),s.loadWidgetPreview(i)}),this.$elem.on("click",".pb-widget-delete-control",function(t){var e=o(this).closest(".pb-widget");s.removeWidget(e)}),this.$elem.on("click",".pb-widget-toggle-control, .pb-widget-title",function(t){o(this).closest(".pb-widget").toggleClass("closed")}),this.$elem.on("click",".pb-add-widget-control",function(t){s.widgetPicker(function(t){if("row"==t.data("type")){var e=s.createWidget("column");s.addWidget(t),s.addWidget(e,t),s.loadWidgetPreview(t)}else if("column"==t.data("type")){var i=s.createWidget("row");s.addWidget(i),s.addWidget(t,i),s.loadWidgetPreview(i)}else{i=s.createWidget("row"),e=s.createWidget("column");s.addWidget(i),s.addWidget(e,i),s.addWidget(t,e),s.loadWidgetPreview(i)}})}),this.$elem.on("sortstart",".ui-sortable",function(t,e){e.item.is(".pb-widget")&&(s.doAction("widgetSortStart",e.item),s.doAction("widgetSortStart/type="+e.item.data("type"),e.item))}),this.$elem.on("sortstop",".ui-sortable",function(t,e){e.item.is(".pb-widget")&&(s.doAction("widgetSortStop",e.item),s.doAction("widgetSortStop/type="+e.item.data("type"),e.item))});var i=!1;this.$elem.closest("form").on("submit",function(t){i||(s.save(),i=!0)}),this.addAction("load",function(t){o.each(t.models,function(t,e){var i=s.createWidget(e),n=a;e.parent&&(n=s.$elem.find(".pb-widgets .pb-widget").filter(function(){return o(this).data("model")==e.parent})),s.addWidget(i,n)}),s.loadWidgetPreview()}),this.addAction("widgetSortStart",function(t){t.hasClass("closed")?t.addClass("no-close"):t.addClass("closed")}),this.addAction("widgetSortStop",function(t){t.hasClass("no-close")?t.removeClass("no-close"):t.removeClass("closed")}),this.addAction("widgetUpdated",function(t){s.loadWidgetPreview(t)}),this.$elem.find(".pb-widgets").sortable({placeholder:"pb-widget-placeholder",items:"> .pb-widget",handle:"> .pb-widget-top > .pb-widget-title",cursor:"move",distance:2,containment:"#wpwrap",tolerance:"pointer",refreshPositions:!0}),this.doAction("init"),this.load()},generateId:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},prepareAjax:function(t){return t=o.extend({},t),this.options.nonceName&&(t[this.options.nonceName]=this.options.nonce),t},chunk:function(t,e){var i=Object.values(t),n=[],d=0,o={};for(var a in t)0!==d&&d%e==0&&(n.push(o),o={}),o[a]=i[d],d++;return n.push(o),n},modal:function(t,e){e=o.extend({},{namespace:"pb-modal",closeIcon:""},e),o.featherlight(t,e)},addAction:function(){arguments[0]="pb/"+arguments[0],wp.hooks.addAction.apply(this,arguments)},removeAction:function(){arguments[0]="pb/"+arguments[0],wp.hooks.removeAction.apply(this,arguments)},doAction:function(){arguments[0]="pb/"+arguments[0],wp.hooks.doAction.apply(this,arguments)},addFilter:function(){arguments[0]="pb/"+arguments[0],wp.hooks.addFilter.apply(this,arguments)},removeFilter:function(){arguments[0]="pb/"+arguments[0],wp.hooks.removeFilter.apply(this,arguments)},applyFilters:function(){return arguments[0]="pb/"+arguments[0],wp.hooks.applyFilters.apply(this,arguments)},createModel:function(t){"object"!=typeof t&&(t={type:t});var e={};t.type!==a&&this.options.widgetDefaults[t.type]!==a&&(e=o.extend({},this.options.widgetDefaults[t.type]));var i={id:this.generateId(),type:null,data:e};return o.extend(!0,{},i,t)},getWidgetModel:function(t){var e=o(t).data("model"),i=this.models[e];return o.extend({},i)},createWidget:function(t){var e=this.createModel(t);this.models[e.id]=e;var i=this.$elem.find(".pb-available-widgets .pb-widget").filter(function(){return o(this).data("type")==e.type}).clone();return i.data("model",e.id),this.doAction("widget",i),this.doAction("widget/type="+i.data("type"),i),i},addWidget:function(t,e,i){var n=o(t),d=this.$elem.find(".pb-widgets");switch(e!==a&&(d=o(e).find("> .pb-widget-inside > .pb-widget-container")),i){case"prepend":d.prepend(n);break;case"insertBefore":n.insertBefore(e);break;case"insertAfter":n.insertAfter(e);break;default:d.append(n)}o(t).find(".pb-widget").addBack().each(function(){var t=o(this);s.doAction("widgetAdded"+t.data("type"),t),s.doAction("widgetAdded/type="+t.data("type"),t)})},duplicateWidget:function(t){var e=this.getWidgetModel(t);delete e.id;var i=this.createWidget(e);return o(t).find("> .pb-widget-inside > .pb-widget-container > .pb-widget").each(function(){var t=s.duplicateWidget(this);i.find("> .pb-widget-inside > .pb-widget-container").append(t)}),i},removeWidget:function(t){var e=o(t).find(".pb-widget").addBack();return e.each(function(){var t=s.getWidgetModel(this);delete s.models[t.id],o.removeData(this,"model")}),o(t).remove(),e.each(function(){s.doAction("widgetRemoved",o(this)),s.doAction("widgetRemoved/type="+o(this).data("type"),o(this))}),o(t)},updateWidget:function(t,e,i){var n;n="object"==typeof e?e:{k:i};var d=this.getWidgetModel(t);o.extend(!0,d.data,n),this.models[d.id]=d,s.doAction("widgetUpdated",o(t)),s.doAction("widgetUpdated/type="+o(t).data("type"),o(t))},widgetPicker:function(i,t){o.ajax({url:this.options.ajaxurl,data:this.prepareAjax({action:"pb_widget_picker",parent:o(t).data("type")}),method:"post",success:function(t){s.modal(t,{afterContent:function(){var e=this;this.$content.closest(".pb-modal").attr("id","pb-widget-picker-modal"),this.$content.on("click",".pb-widget",function(){var t=s.createWidget({type:o(this).data("type")});i(t),e.close()})}})}})},widgetSettings:function(i){var t=this.getWidgetModel(i);o.ajax({url:this.options.ajaxurl,data:this.prepareAjax({action:"pb_widget_settings",model:t}),method:"post",success:function(t){s.modal(t,{afterContent:function(){var e=this;this.$content.closest(".pb-modal").attr("id","pb-widget-settings-modal"),this.$content.on("submit","form",function(t){t.preventDefault(),o.ajax({url:s.options.ajaxurl,data:o(this).serialize(),method:"post",success:function(t){s.updateWidget(i,t),e.close()}})}),s.doAction("widgetSettings",this.$content,o(i)),s.doAction("widgetSettings/type="+o(i).data("type"),this.$content,o(i))}})}})},loadWidgetPreview:function(t){var i;i=t!==a?o(t).find(".pb-widget").addBack():this.$elem.find(".pb-widgets .pb-widget");var e={};(i.each(function(){var t=s.getWidgetModel(this);e[t.id]=t}),Object.keys(e).length)&&this.chunk(e,this.options.chunkLength).forEach(function(t,e){o.ajax({url:ajaxurl,method:"POST",async:!1,data:s.prepareAjax({action:"pb_widget_preview",models:t}),success:function(t){o.each(t,function(t,e){i.filter(function(){return o(this).data("model")==t}).find("> .pb-widget-inside > .pb-widget-preview").html(e)})}})})},load:function(){this.models={},this.$elem.find(".pb-widgets").empty(),o.ajax({url:this.options.ajaxurl,data:this.prepareAjax({action:"pb_load",post:this.options.post}),method:"post",success:function(t){s.doAction("load",t)}})},save:function(){var e={};this.$elem.find(".pb-widgets .pb-widget").each(function(){var t=s.getWidgetModel(this);e[t.id]=o.extend(t,{index:o(this).index(),parent:o(this).parent().closest(".pb-widget").data("model")||""})}),this.models=e,this.chunk(this.models,this.options.chunkLength).forEach(function(t,e){var i=0==e;o.ajax({url:ajaxurl,method:"POST",async:!1,data:s.prepareAjax({action:"pb_save",post:s.options.post,models:t,append:i?0:1})})})}};t.pb=s}(jQuery,window,void 0),function(e,t,i){"use strict";var n=t.pb||{};n.fields={},n.field={id:null,extend:function(t){e.extend(this,t),n.addAction("field/type="+this.id,this.field)},field:function(t){}};var d={};function o(t){d=t.fields}function a(t){t.find(".pb-field").each(function(){var t=e(this);n.doAction("field",t),n.doAction("field/type="+t.data("type"),t)})}n.addAction("init",function(){n.addAction("load",o),n.addAction("widgetSettings",a)}),n.getFieldModel=function(t){var e=t.data("key");return d[e]}}(jQuery,window),function(s,t,e){"use strict";var r=t.pb||{},i=r.field.extend({id:"editor",field:function(t){var e=r.getFieldModel(t);if("undefined"==typeof tinymce)return!1;if("undefined"==typeof tinyMCEPreInit)return!1;var i=tinyMCEPreInit.mceInit.pb_content,n=t.find("textarea"),d=n.attr("id").replace(/-/g,"");n.attr("id",d);var o=tinymce.get(d);o&&(tinymce.execCommand("mceRemoveControl",!0,d),o.destroy());var a=s.extend({},i,e.tinymce);a.id=d,a.selector="#"+d,tinyMCEPreInit.mceInit[d]=a,tinymce.init(a)}});r.fields.editor=i}(jQuery,window),function(t,e,s){"use strict";var r=e.pb||{},i=r.field.extend({id:"image",field:function(t){r.getFieldModel(t);var n=null,d=t.find("> .pb-media-picker"),o=d.find(".pb-media-picker-input"),a=d.find(".pb-media-picker-image"),e=d.find(".pb-media-picker-add"),i=d.find(".pb-media-picker-remove");o.val()?d.addClass("pb-has-value"):d.removeClass("pb-has-value"),e.on("click",function(t){n?n.open():n=wp.media({title:"Choose Image",button:{text:"Insert Image"},library:{type:["image"]},multiple:!1}).on("select",function(t){var e=n.state().get("selection").first().toJSON(),i=e.sizes.full;e.sizes.thumbnail!==s&&(i=e.sizes.thumbnail),o.val(e.id),a.attr("src",i.url),d.addClass("pb-has-value")})}),i.on("click",function(t){o.val(""),a.removeAttr("src"),d.removeClass("pb-has-value")})}});r.fields.image=i}(jQuery,window,void 0),function(o){pb.addAction("widgetSettings",function(t,e){t.find(".pb-fields, .pb-sub-fields").each(function(){var t=o(this).find("> .pb-field"),e=t.filter('[data-type="tab"]');if(!e.length)return!0;t.hide();var i=function(t){var e=n.find(".active");e.length&&e.removeClass("active").data("field").nextUntil('[data-type="tab"]').hide(),n.find(".pb-nav-item").eq(t).addClass("active").data("field").nextUntil('[data-type="tab"]').show()},n=o('<nav class="pb-nav"></nav>');e.each(function(){var t=o(this),e=o('<a href="#" class="pb-nav-item pb-nav-link"></a>');e.text(t.find("> .pb-label").text()).data("field",t).on("click",function(t){t.preventDefault(),i(o(this).index())}),n.append(e)});var d=o('<div class="pb-field" data-type="tabnav"></div>');d.append(n),d.insertBefore(e.first()),i(0)})})}(jQuery,window),function(e,t,i){"use strict";var n=t.pb||{};n.widgets={},n.widget={id:null,extend:function(t){e.extend(this,t),n.addAction("widget/type="+this.id,this.widget),n.addAction("widgetAdded/type="+this.id,this.widgetAdded),n.addAction("widgetUpdated/type="+this.id,this.widgetUpdated),n.addAction("widgetRemoved/type="+this.id,this.widgetRemoved),n.addAction("widgetSettings/type="+this.id,this.widgetSettings)},widget:function(t){},widgetAdded:function(t){},widgetUpdated:function(t){},widgetRemoved:function(t){},widgetSettings:function(t,e){}}}(jQuery,window),function(t,e,i){"use strict";var a=e.pb||{};function n(t){var n=new RegExp("\\b(pb-(?:offset|col|order)(?:-(?:sm|md|lg|xl))?(?:-\\d+)?)\\b","g");t.removeClass(function(t,e){var i=e.match(n);return i?i.join(" "):""});var e=a.getWidgetModel(t),i=e.data.responsiveness.offset_sm;i&&t.addClass("pb-offset-sm-"+i);var d=e.data.cols;d&&t.addClass("pb-col-sm-"+d);var o=e.data.responsiveness.order_sm;o&&t.addClass("pb-order-sm-"+o)}var d=a.widget.extend({id:"column",widget:function(t){n(t),t.find("> .pb-widget-inside > .pb-widget-container").sortable({placeholder:"pb-widget-placeholder",items:"> .pb-widget",handle:"> .pb-widget-top > .pb-widget-title",cursor:"move",distance:2,containment:"#wpwrap",tolerance:"pointer",refreshPositions:!0,connectWith:".pb-column-widget > .pb-widget-inside > .pb-widget-container"})},widgetUpdated:function(t){n(t)}});a.widgets.column=d}(jQuery,window),function(a,t,e){"use strict";var s=t.pb||{};function r(t,e){var i=function t(e,i){return i?t(i,e%i):e}(t,e);return[t/i,e/i]}function o(t,e,i){var n,d,o=[];for(var a in t)n=t[a],d=i?r(n,e):[n,e],o.push(d[0]+"/"+d[1]);return o}function c(t,n){n=a.extend({},{min:1,max:12,sep:"+"},n);var d=[];return a.each(String(t).split(n.sep),function(t,e){if(e=a.trim(e),/^\d+\/\d+$/.test(e)){var i=e.split("/");e=n.max*(i[0]/i[1])}if(e=parseInt(e),isNaN(e))return!0;e<n.min?e=n.min:e>n.max&&(e=n.max),d.push(e)}),d}var i=s.widget.extend({id:"row",widget:function(t){t.find("> .pb-widget-inside > .pb-widget-container").addClass("pb-row"),t.find("> .pb-widget-inside > .pb-widget-container").sortable({placeholder:"pb-widget-placeholder",items:"> .pb-widget",handle:"> .pb-widget-top > .pb-widget-title",cursor:"move",distance:2,containment:"#wpwrap",tolerance:"pointer",refreshPositions:!0})},widgetSettings:function(t,e){var i,n=(i=[],e.find("> .pb-widget-inside > .pb-widget-container > .pb-column-widget").each(function(){var t=s.getWidgetModel(this);i.push(t.data.cols)}),i),d=t.find("#pb_input-row_layout");n=o(n,12,!0),d.val(n.join("+")),t.on("click",".pb-layout-control",function(t){var e=a(this).data("layout");e=o(e=c(e),12,!0),d.val(e.join("+"))})},widgetUpdated:function(t){var e,d,o,i=c(s.getWidgetModel(t).data.layout);i.length||i.push(12),e=i,o=(d=t).find("> .pb-widget-inside > .pb-widget-container > .pb-column-widget"),a.each(e,function(t,e){var i=o.eq(t);if(i.length)s.updateWidget(i,{cols:e});else{i=s.createWidget({type:"column",data:{cols:e}});var n=d.find("> .pb-widget-inside > .pb-widget-container > .pb-column-widget").eq(t-1);s.addWidget(i,n,"insertAfter")}}),o.slice(e.length).each(function(){s.removeWidget(this)})}});s.widgets.row=i}(jQuery,window);